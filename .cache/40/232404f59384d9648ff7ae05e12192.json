{"id":"../../node_modules/sr/index.js","dependencies":[{"name":"C:\\Users\\tangoel\\OneDrive - Cisco\\Desktop\\New folder (3)\\complete-node-bootcamp\\4-natours\\starter\\package.json","includedInParent":true,"mtime":1672038799584},{"name":"C:\\Users\\tangoel\\OneDrive - Cisco\\Desktop\\New folder (3)\\complete-node-bootcamp\\4-natours\\starter\\node_modules\\sr\\package.json","includedInParent":true,"mtime":1672038798408},{"name":"child_process","loc":{"line":1,"column":25,"index":25},"parent":"C:\\Users\\tangoel\\OneDrive - Cisco\\Desktop\\New folder (3)\\complete-node-bootcamp\\4-natours\\starter\\node_modules\\sr\\index.js","resolved":"C:\\Users\\tangoel\\OneDrive - Cisco\\Desktop\\New folder (3)\\complete-node-bootcamp\\4-natours\\starter\\node_modules\\parcel-bundler\\src\\builtins\\_empty.js"},{"name":"path","loc":{"line":2,"column":28,"index":70},"parent":"C:\\Users\\tangoel\\OneDrive - Cisco\\Desktop\\New folder (3)\\complete-node-bootcamp\\4-natours\\starter\\node_modules\\sr\\index.js","resolved":"C:\\Users\\tangoel\\OneDrive - Cisco\\Desktop\\New folder (3)\\complete-node-bootcamp\\4-natours\\starter\\node_modules\\path-browserify\\index.js"},{"name":"flatted/cjs","loc":{"line":3,"column":24,"index":102},"parent":"C:\\Users\\tangoel\\OneDrive - Cisco\\Desktop\\New folder (3)\\complete-node-bootcamp\\4-natours\\starter\\node_modules\\sr\\index.js","resolved":"C:\\Users\\tangoel\\OneDrive - Cisco\\Desktop\\New folder (3)\\complete-node-bootcamp\\4-natours\\starter\\node_modules\\flatted\\cjs\\index.js"}],"generated":{"js":"var __dirname = \"C:\\\\Users\\\\tangoel\\\\OneDrive - Cisco\\\\Desktop\\\\New folder (3)\\\\complete-node-bootcamp\\\\4-natours\\\\starter\\\\node_modules\\\\sr\";\nconst { fork } = require('child_process')\nconst { resolve } = require('path')\nconst flatted = require('flatted/cjs')\n\nmodule.exports = module => {\n  const targetModule = require(module)\n  const child = fork(resolve(__dirname, './worker.js'), [module])\n  child.channel.unref()\n  child.unref()\n\n  let pendingCount = 0\n\n  child.on('message', msg => {\n    if (pendingCount === 0) child.unref()\n    child.emit(msg.id, flatted.parse(msg.result))\n  })\n\n  return new Proxy(targetModule, {\n    get (target, prop) {\n      // console.log('get', prop)\n      const id = Math.floor(Math.random() * 100000)\n\n      if (!(prop in target)) throw new Error(`${prop} not found in ${module}`)\n      if (typeof target[prop] !== 'function') return target[prop]\n\n      child.send({ type: 'get', prop, id })\n      child.ref()\n      pendingCount++\n      return new Promise((resolve, reject) => {\n        child.once(id, val => {\n          resolve(val)\n        })\n      })\n    },\n    apply (target, thisArg, args) {\n      // console.log('apply', thisArg, args)\n      const id = Math.floor(Math.random() * 100000)\n\n      args = args.map((arg, argIndex) => {\n        if (typeof arg === 'function') {\n          pendingCount++\n          child.once(`${id}-${argIndex}`, val => {\n            arg(...val)\n          })\n          return 'function'\n        }\n        return arg\n      })\n\n      child.send({ type: 'apply', args, id })\n      child.ref()\n      pendingCount++\n      return new Promise((resolve, reject) => {\n        child.once(id, val => {\n          resolve(val)\n        })\n      })\n    }\n  })\n}\n"},"sourceMaps":{"js":{"mappings":[{"source":"../../node_modules/sr/index.js","original":{"line":1,"column":0},"generated":{"line":2,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":2,"column":0},"generated":{"line":3,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":3,"column":0},"generated":{"line":4,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":4,"column":0},"generated":{"line":5,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":5,"column":0},"generated":{"line":6,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":6,"column":0},"generated":{"line":7,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":7,"column":0},"generated":{"line":8,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":8,"column":0},"generated":{"line":9,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":9,"column":0},"generated":{"line":10,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":10,"column":0},"generated":{"line":11,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":11,"column":0},"generated":{"line":12,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":12,"column":0},"generated":{"line":13,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":13,"column":0},"generated":{"line":14,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":14,"column":0},"generated":{"line":15,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":15,"column":0},"generated":{"line":16,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":16,"column":0},"generated":{"line":17,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":17,"column":0},"generated":{"line":18,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":18,"column":0},"generated":{"line":19,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":19,"column":0},"generated":{"line":20,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":20,"column":0},"generated":{"line":21,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":21,"column":0},"generated":{"line":22,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":22,"column":0},"generated":{"line":23,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":23,"column":0},"generated":{"line":24,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":24,"column":0},"generated":{"line":25,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":25,"column":0},"generated":{"line":26,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":26,"column":0},"generated":{"line":27,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":27,"column":0},"generated":{"line":28,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":28,"column":0},"generated":{"line":29,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":29,"column":0},"generated":{"line":30,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":30,"column":0},"generated":{"line":31,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":31,"column":0},"generated":{"line":32,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":32,"column":0},"generated":{"line":33,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":33,"column":0},"generated":{"line":34,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":34,"column":0},"generated":{"line":35,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":35,"column":0},"generated":{"line":36,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":36,"column":0},"generated":{"line":37,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":37,"column":0},"generated":{"line":38,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":38,"column":0},"generated":{"line":39,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":39,"column":0},"generated":{"line":40,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":40,"column":0},"generated":{"line":41,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":41,"column":0},"generated":{"line":42,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":42,"column":0},"generated":{"line":43,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":43,"column":0},"generated":{"line":44,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":44,"column":0},"generated":{"line":45,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":45,"column":0},"generated":{"line":46,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":46,"column":0},"generated":{"line":47,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":47,"column":0},"generated":{"line":48,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":48,"column":0},"generated":{"line":49,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":49,"column":0},"generated":{"line":50,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":50,"column":0},"generated":{"line":51,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":51,"column":0},"generated":{"line":52,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":52,"column":0},"generated":{"line":53,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":53,"column":0},"generated":{"line":54,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":54,"column":0},"generated":{"line":55,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":55,"column":0},"generated":{"line":56,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":56,"column":0},"generated":{"line":57,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":57,"column":0},"generated":{"line":58,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":58,"column":0},"generated":{"line":59,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":59,"column":0},"generated":{"line":60,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":60,"column":0},"generated":{"line":61,"column":0}},{"source":"../../node_modules/sr/index.js","original":{"line":61,"column":0},"generated":{"line":62,"column":0}}],"sources":{"../../node_modules/sr/index.js":"const { fork } = require('child_process')\nconst { resolve } = require('path')\nconst flatted = require('flatted/cjs')\n\nmodule.exports = module => {\n  const targetModule = require(module)\n  const child = fork(resolve(__dirname, './worker.js'), [module])\n  child.channel.unref()\n  child.unref()\n\n  let pendingCount = 0\n\n  child.on('message', msg => {\n    if (pendingCount === 0) child.unref()\n    child.emit(msg.id, flatted.parse(msg.result))\n  })\n\n  return new Proxy(targetModule, {\n    get (target, prop) {\n      // console.log('get', prop)\n      const id = Math.floor(Math.random() * 100000)\n\n      if (!(prop in target)) throw new Error(`${prop} not found in ${module}`)\n      if (typeof target[prop] !== 'function') return target[prop]\n\n      child.send({ type: 'get', prop, id })\n      child.ref()\n      pendingCount++\n      return new Promise((resolve, reject) => {\n        child.once(id, val => {\n          resolve(val)\n        })\n      })\n    },\n    apply (target, thisArg, args) {\n      // console.log('apply', thisArg, args)\n      const id = Math.floor(Math.random() * 100000)\n\n      args = args.map((arg, argIndex) => {\n        if (typeof arg === 'function') {\n          pendingCount++\n          child.once(`${id}-${argIndex}`, val => {\n            arg(...val)\n          })\n          return 'function'\n        }\n        return arg\n      })\n\n      child.send({ type: 'apply', args, id })\n      child.ref()\n      pendingCount++\n      return new Promise((resolve, reject) => {\n        child.once(id, val => {\n          resolve(val)\n        })\n      })\n    }\n  })\n}\n"},"lineCount":62}},"error":null,"hash":"ce3fdf91737a59256497f78fa37d0a9e","cacheData":{"env":{}}}